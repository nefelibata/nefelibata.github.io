<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠ‚æ°´å°ç®¡å®¶æ¨¡æ‹Ÿå™¨</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f9fc;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 25px;
            color: #1a5fb4;
            border-bottom: 2px solid #1a5fb4;
            padding-bottom: 10px;
        }
        .section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .input-section {
            background-color: #e8f4f8;
        }
        .result-section {
            background-color: #f0f8e8;
        }
        .tips-section {
            background-color: #fff8e1;
        }
        h2 {
            color: #2c6bae;
            margin-top: 0;
        }
        h3 {
            color: #4a7db6;
            margin: 15px 0 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #2c6bae;
            color: white;
        }
        .input-cell {
            background-color: #fffacd;
            width: 60px;
            text-align: center;
            border: 1px solid #ffd700;
            border-radius: 3px;
            padding: 5px;
        }
        .usage-cell {
            background-color: #e8f5e9;
            font-weight: bold;
        }
        .result-cell {
            background-color: #e8f5e9;
            font-weight: bold;
        }
        .calc-btn {
            background-color: #2c6bae;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 15px 0;
            transition: background-color 0.3s;
            display: block;
            margin: 20px auto;
        }
        .calc-btn:hover {
            background-color: #1a5fb4;
        }
        .tips {
            background-color: #e3f2fd;
            padding: 12px;
            border-left: 4px solid #1a5fb4;
            margin: 8px 0;
            border-radius: 3px;
        }
        .btn-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        .input-label {
            font-weight: bold;
            margin-right: 10px;
        }
        .radio-group {
            margin: 10px 0;
            display: flex;
            gap: 20px;
        }
        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ’§ èŠ‚æ°´å°ç®¡å®¶æ¨¡æ‹Ÿå™¨</h1>
        <p>é€šè¿‡è®¡ç®—å®¶åº­ç”¨æ°´é‡å’Œè´¹ç”¨ï¼Œå­¦ä¹ èŠ‚æ°´çŸ¥è¯†ï¼ŒåŸ¹å…»ç¯ä¿æ„è¯†</p>
    </div>

    <div class="section input-section">
        <h2>ç¬¬ä¸€æ­¥ï¼šè¯·è¾“å…¥æ‚¨å®¶çš„æƒ…å†µ</h2>
        
        <div class="radio-group">
            <div class="radio-item">
                <input type="radio" id="oneHousehold" name="waterType" value="oneHousehold" checked>
                <label for="oneHousehold">ä¸€æˆ·ä¸€è¡¨</label>
            </div>
            <div class="radio-item">
                <input type="radio" id="collective" name="waterType" value="collective">
                <label for="collective">é›†ä½“è¡¨</label>
            </div>
        </div>
        
        <div>
            <span class="input-label">å®¶åº­äººå£æ•°ï¼ˆäººï¼‰ï¼š</span>
            <input type="number" id="familyMembers" min="1" max="10" value="3" class="input-cell">
        </div>

        <h3>ç¬¬äºŒæ­¥ï¼šè¯·å¡«å†™æ‚¨çš„ç”¨æ°´ä¹ æƒ¯ï¼ˆæ¯æœˆï¼‰</h3>
        <table id="waterUsageTable">
            <thead>
                <tr>
                    <th>ç”¨æ°´é¡¹ç›®</th>
                    <th>æ¯æ¬¡ç”¨æ°´é‡(L)</th>
                    <th>æ¯æœˆæ¬¡æ•°</th>
                    <th>æœˆç”¨æ°´é‡(mÂ³)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>åˆ·ç‰™ï¼ˆä¸å…³æ°´é¾™å¤´ï¼‰</td>
                    <td><input type="number" class="input-cell usage-amount" value="30" min="0" step="1"></td>
                    <td><input type="number" class="input-cell usage-count" value="60" min="0" step="1"></td>
                    <td class="monthly-usage usage-cell">1.80</td>
                </tr>
                <tr>
                    <td>æ´—æ¾¡ï¼ˆæ·‹æµ´10åˆ†é’Ÿï¼‰</td>
                    <td><input type="number" class="input-cell usage-amount" value="120" min="0" step="5"></td>
                    <td><input type="number" class="input-cell usage-count" value="30" min="0" step="1"></td>
                    <td class="monthly-usage usage-cell">3.60</td>
                </tr>
                <tr>
                    <td>æ´—è¡£æœºï¼ˆå…¨è‡ªåŠ¨ï¼‰</td>
                    <td><input type="number" class="input-cell usage-amount" value="70" min="0" step="5"></td>
                    <td><input type="number" class="input-cell usage-count" value="12" min="0" step="1"></td>
                    <td class="monthly-usage usage-cell">0.84</td>
                </tr>
                <tr>
                    <td>é©¬æ¡¶ï¼ˆå†²æ°´ä¸€æ¬¡ï¼‰</td>
                    <td><input type="number" class="input-cell usage-amount" value="6" min="0" step="1"></td>
                    <td><input type="number" class="input-cell usage-count" value="150" min="0" step="5"></td>
                    <td class="monthly-usage usage-cell">0.90</td>
                </tr>
                <tr>
                    <td>åšé¥­ã€æ´—èœ</td>
                    <td><input type="number" class="input-cell usage-amount" value="20" min="0" step="2"></td>
                    <td><input type="number" class="input-cell usage-count" value="90" min="0" step="5"></td>
                    <td class="monthly-usage usage-cell">1.80</td>
                </tr>
                <tr>
                    <td>å…¶ä»–ç”¨æ°´</td>
                    <td><input type="number" class="input-cell usage-amount" value="15" min="0" step="2"></td>
                    <td><input type="number" class="input-cell usage-count" value="30" min="0" step="5"></td>
                    <td class="monthly-usage usage-cell">0.45</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>æ€»æœˆç”¨æ°´é‡ (mÂ³)</strong></td>
                    <td id="totalWaterUsage" class="usage-cell"><strong>9.39</strong></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <button class="calc-btn" onclick="calculateWaterCost()">è®¡ç®—æ°´è´¹</button>

    <div class="section result-section">
        <h2>ç¬¬ä¸‰æ­¥ï¼šæ°´è´¹è®¡ç®—ç»“æœ</h2>
        <table>
            <thead>
                <tr>
                    <th>é˜¶æ¢¯</th>
                    <th>ç”¨æ°´é‡èŒƒå›´ (mÂ³)</th>
                    <th>å•ä»· (å…ƒ/mÂ³)</th>
                    <th>æ°´è´¹ (å…ƒ)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ç¬¬ä¸€é˜¶æ¢¯</td>
                    <td id="firstTierRange">0 - 32</td>
                    <td>2.69</td>
                    <td id="firstTierCost" class="result-cell">25.26</td>
                </tr>
                <tr>
                    <td>ç¬¬äºŒé˜¶æ¢¯</td>
                    <td id="secondTierRange">32.1 - 48</td>
                    <td>3.42</td>
                    <td id="secondTierCost" class="result-cell">0.00</td>
                </tr>
                <tr>
                    <td>ç¬¬ä¸‰é˜¶æ¢¯</td>
                    <td id="thirdTierRange">48.1ä»¥ä¸Š</td>
                    <td>4.14</td>
                    <td id="thirdTierCost" class="result-cell">0.00</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>æ€»æ°´è´¹ï¼š</strong></td>
                    <td id="totalCost" class="result-cell"><strong>25.26</strong></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="section tips-section">
        <h2>ç¬¬å››æ­¥ï¼šæ‚¨çš„èŠ‚æ°´å°è´´å£«</h2>
        <div id="waterSavingTips">
            <div class="tips">Â· æ‚¨çš„å®¶åº­å…·æœ‰è‰¯å¥½çš„èŠ‚æ°´ä¹ æƒ¯ï¼Œè¯·ç»§ç»­ä¿æŒï¼</div>
        </div>
    </div>

    <script>
        // è®¡ç®—æ¯æœˆç”¨æ°´é‡
        function calculateMonthlyUsage() {
            const usageAmounts = document.querySelectorAll('.usage-amount');
            const usageCounts = document.querySelectorAll('.usage-count');
            const usageCells = document.querySelectorAll('.monthly-usage');
            
            let totalUsage = 0;
            
            usageAmounts.forEach((amountInput, index) => {
                const usagePerTime = parseFloat(amountInput.value) || 0;
                const times = parseFloat(usageCounts[index].value) || 0;
                const monthlyUsage = (usagePerTime * times) / 1000;
                
                usageCells[index].textContent = monthlyUsage.toFixed(2);
                totalUsage += monthlyUsage;
            });
            
            document.getElementById('totalWaterUsage').innerHTML = '<strong>' + totalUsage.toFixed(2) + '</strong>';
            return totalUsage;
        }

        // è®¡ç®—æ°´è´¹
        function calculateWaterCost() {
            const members = parseInt(document.getElementById('familyMembers').value) || 3;
            const totalUsage = calculateMonthlyUsage();
            const isOneHousehold = document.getElementById('oneHousehold').checked;
            
            let firstTierLimit, secondTierLimit;
            let firstTierPrice = 2.69;
            let secondTierPrice = 3.42;
            let thirdTierPrice = 4.14;
            
            // é›†ä½“è¡¨ä¸å®è¡Œé˜¶æ¢¯æ°´ä»·
            if (!isOneHousehold) {
                // æ›´æ–°è¡¨æ ¼æ˜¾ç¤º
                document.getElementById('firstTierRange').textContent = "æ‰€æœ‰ç”¨æ°´é‡";
                document.getElementById('secondTierRange').textContent = "-";
                document.getElementById('thirdTierRange').textContent = "-";
                
                // è®¡ç®—è´¹ç”¨
                const totalCost = totalUsage * firstTierPrice;
                
                document.getElementById('firstTierCost').textContent = totalCost.toFixed(2);
                document.getElementById('secondTierCost').textContent = "0.00";
                document.getElementById('thirdTierCost').textContent = "0.00";
                document.getElementById('totalCost').innerHTML = '<strong>' + totalCost.toFixed(2) + '</strong>';
            } else {
                // ä¸€æˆ·ä¸€è¡¨çš„é˜¶æ¢¯è®¡ç®—
                if (members <= 4) {
                    firstTierLimit = 32;
                    secondTierLimit = 48;
                    document.getElementById('firstTierRange').textContent = "0 - 32";
                    document.getElementById('secondTierRange').textContent = "32.1 - 48";
                    document.getElementById('thirdTierRange').textContent = "48.1ä»¥ä¸Š";
                } else {
                    // è¶…è¿‡4äººï¼ŒæŒ‰äººæ•°è®¡ç®—é˜¶æ¢¯
                    firstTierLimit = 8 * members;
                    secondTierLimit = 12 * members;
                    document.getElementById('firstTierRange').textContent = `0 - ${firstTierLimit}`;
                    document.getElementById('secondTierRange').textContent = `${firstTierLimit + 0.1} - ${secondTierLimit}`;
                    document.getElementById('thirdTierRange').textContent = `${secondTierLimit + 0.1}ä»¥ä¸Š`;
                }
                
                let firstTierCost = 0;
                let secondTierCost = 0;
                let thirdTierCost = 0;
                
                if (totalUsage <= firstTierLimit) {
                    firstTierCost = totalUsage * firstTierPrice;
                } else {
                    firstTierCost = firstTierLimit * firstTierPrice;
                    
                    if (totalUsage <= secondTierLimit) {
                        secondTierCost = (totalUsage - firstTierLimit) * secondTierPrice;
                    } else {
                        secondTierCost = (secondTierLimit - firstTierLimit) * secondTierPrice;
                        thirdTierCost = (totalUsage - secondTierLimit) * thirdTierPrice;
                    }
                }
                
                const totalCost = firstTierCost + secondTierCost + thirdTierCost;
                
                document.getElementById('firstTierCost').textContent = firstTierCost.toFixed(2);
                document.getElementById('secondTierCost').textContent = secondTierCost.toFixed(2);
                document.getElementById('thirdTierCost').textContent = thirdTierCost.toFixed(2);
                document.getElementById('totalCost').innerHTML = '<strong>' + totalCost.toFixed(2) + '</strong>';
            }
            
            generateWaterSavingTips(totalUsage, members);
        }

        // ç”ŸæˆèŠ‚æ°´å»ºè®®
        function generateWaterSavingTips(totalUsage, members) {
            const tipsContainer = document.getElementById('waterSavingTips');
            tipsContainer.innerHTML = '';
            
            const perPersonUsage = totalUsage / members;
            const usageAmounts = document.querySelectorAll('.usage-amount');
            const usageCounts = document.querySelectorAll('.usage-count');
            
            // åˆ·ç‰™å»ºè®®
            const brushAmount = parseFloat(usageAmounts[0].value) || 0;
            const brushTimes = parseFloat(usageCounts[0].value) || 0;
            if (brushAmount > 25) {
                const tip = document.createElement('div');
                tip.className = 'tips';
                tip.textContent = 'Â· åˆ·ç‰™æ—¶è¯·å…³ç´§æ°´é¾™å¤´ï¼Œå¯å°†æ¯æ¬¡ç”¨æ°´é‡ä»' + brushAmount + 'Lå‡å°‘åˆ°6Lï¼Œæ¯æœˆå¯èŠ‚æ°´çº¦' + ((brushAmount-6) * brushTimes / 1000).toFixed(1) + 'mÂ³ã€‚';
                tipsContainer.appendChild(tip);
            }
            
            // æ´—æ¾¡å»ºè®®
            const showerAmount = parseFloat(usageAmounts[1].value) || 0;
            const showerTimes = parseFloat(usageCounts[1].value) || 0;
            if (showerAmount > 100) {
                const tip = document.createElement('div');
                tip.className = 'tips';
                tip.textContent = 'Â· ä½¿ç”¨èŠ‚æ°´èŠ±æ´’æˆ–å°†æ´—æ¾¡æ—¶é—´ç¼©çŸ­ï¼Œå¯å°†æ¯æ¬¡ç”¨æ°´é‡ä»' + showerAmount + 'Lå‡å°‘åˆ°80Lï¼Œæ¯æœˆå¯èŠ‚æ°´çº¦' + ((showerAmount-80) * showerTimes / 1000).toFixed(1) + 'mÂ³ã€‚';
                tipsContainer.appendChild(tip);
            }
            
            // æ´—è¡£æœºå»ºè®®
            const washAmount = parseFloat(usageAmounts[2].value) || 0;
            const washTimes = parseFloat(usageCounts[2].value) || 0;
            if (washTimes > 10 && washAmount > 50) {
                const tip = document.createElement('div');
                tip.className = 'tips';
                tip.textContent = 'Â· æ´—è¡£æœºå°½é‡æ»¡è´Ÿè·è¿è¡Œï¼Œå‡å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œå¯é€‰æ‹©èŠ‚æ°´æ¨¡å¼ã€‚';
                tipsContainer.appendChild(tip);
            }
            
            // é©¬æ¡¶å»ºè®®
            const toiletAmount = parseFloat(usageAmounts[3].value) || 0;
            if (toiletAmount > 6) {
                const tip = document.createElement('div');
                tip.className = 'tips';
                tip.textContent = 'Â· è€ƒè™‘ä½¿ç”¨èŠ‚æ°´å‹é©¬æ¡¶ï¼Œæ¯æ¬¡å†²æ°´å¯èŠ‚çœ' + (toiletAmount - 6) + 'Læ°´ã€‚';
                tipsContainer.appendChild(tip);
            }
            
            // æ€»ä½“è¯„ä»·
            const overallTip = document.createElement('div');
            overallTip.className = 'tips';
            
            if (perPersonUsage > 6) {
                overallTip.textContent = 'Â· æ‚¨çš„å®¶åº­äººå‡ç”¨æ°´é‡è¾ƒé«˜ï¼ˆ' + perPersonUsage.toFixed(2) + 'mÂ³/äººï¼‰ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœ‰æ¼æ°´æˆ–æµªè´¹ç°è±¡ã€‚å»ºè®®æ£€æŸ¥æ°´é¾™å¤´æ˜¯å¦å…³ç´§ï¼Œå‡å°‘ä¸å¿…è¦çš„ç”¨æ°´ã€‚';
            } else if (perPersonUsage > 4) {
                overallTip.textContent = 'Â· æ‚¨çš„å®¶åº­ç”¨æ°´é‡é€‚ä¸­ï¼ˆ' + perPersonUsage.toFixed(2) + 'mÂ³/äººï¼‰ï¼Œä»æœ‰èŠ‚æ°´ç©ºé—´ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨èŠ‚æ°´å™¨å…·ï¼Œå‡å°‘å†²æ´—æ—¶é—´ã€‚';
            } else {
                overallTip.textContent = 'Â· æ‚¨çš„å®¶åº­å…·æœ‰è‰¯å¥½çš„èŠ‚æ°´ä¹ æƒ¯ï¼ˆ' + perPersonUsage.toFixed(2) + 'mÂ³/äººï¼‰ï¼Œè¯·ç»§ç»­ä¿æŒï¼æ‚¨ä¸ºä¿æŠ¤æ°´èµ„æºåšå‡ºäº†è´¡çŒ®ã€‚';
            }
            
            tipsContainer.appendChild(overallTip);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºæ‰€æœ‰è¾“å…¥æ¡†æ·»åŠ å˜åŒ–ç›‘å¬
            const allInputs = document.querySelectorAll('input');
            allInputs.forEach(input => {
                input.addEventListener('input', calculateWaterCost);
            });
            
            // åˆå§‹è®¡ç®—ä¸€æ¬¡
            calculateWaterCost();
        });
    </script>
</body>
</html>
